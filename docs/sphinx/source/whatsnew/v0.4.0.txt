.. _whatsnew_0400:

v0.4.0 (July xx, 2016)
-----------------------

This is a major release from 0.3.3.
We recommend that all users upgrade to this version after reviewing
the API changes.


API Changes
~~~~~~~~~~~

* Remove unneeded module argument from singlediode function. (:issue:`200`)
* In ``pvlib.irradiance.perez``, renamed argument ``modelt`` to ``model``.
  (:issue:`196`)
* Most functions in the irradiance module now work with scalar inputs
  in addition to arrays and Series. Furthermore, these functions no
  longer promote scalar or array input to Series output.
  Also applies to atmosphere.relativeairmass. (:issue:`201`)


Enhancements
~~~~~~~~~~~~

* Adds the First Solar spectral correction model. (:issue:`115`)
* Adds the Gueymard 1994 integrated precipitable water model. (:issue:`115`)
* Adds the PVWatts DC, AC, and system losses model. (:issue:`195`)
* Improve PEP8 conformity in irradiance module.
* irradiance.disc is up to 10x faster. (:issue:``)


Bug fixes
~~~~~~~~~

* dirint function yielded the wrong results for non-sea-level pressures.
  Fixed. (:issue:`212`)


Documentation
~~~~~~~~~~~~~

* Added new terms to the variables documentation. (:issue:`195`)
* Fix documentation build warnings. (:issue:`210`)


Other
~~~~~

* Switch to the py.test testing framework. (:issue:`204`)
* Reconfigure Appveyor CI builds and resolve an issue in which the command
  line length was too long. (:issue:`207`)


Requirements
~~~~~~~~~~~~

* pvlib now requires numpy >= 1.9.0, released in mid 2014.
  This is needed to more easily support scalar input/output.
  Most of pvlib will work with lesser versions.


Code Contributors
~~~~~~~~~~~~~~~~~

* Will Holmgren
* Jonathan Chambers
